


:root {
  
  --color-primary: #5a3a2b; 
  --color-primary-rgb: 90, 58, 43;
  --color-secondary: #7b5a4a; 
  --color-accent: #e0b060; 
  --color-accent-dark: #c09040; 
  --color-text-dark: #333;
  --color-text-light: #f0e6c8; 
  --color-background-light: #f8f0e0; 
  --color-background-medium: #e8dcc0; 
  --color-background-dark: #d2b48c; 
  --color-border: #a08060; 
  --color-success: #28a745;
  --color-success-bg: #d4edda;
  --color-error: #dc3545;
  --color-error-bg: #f8d7da;
  --color-info: #17a2b8;
  --color-info-bg: #d1ecf1;
  --beige-light: #f6f0e6;
  --beige-medium: #e6d8c2;
  --beige-dark: #c9b189;
  --beige-darker: #b08b5b;
  --brown-primary: #5a3a2b;
  --brown-secondary: #7b5a4a;
  --brown-dark: #3f2a1e;
  
  
  --border-radius-small: 4px;
  --border-radius-medium: 8px;
  --border-radius-large: 12px;
  --box-shadow-default: 0 4px 12px rgba(0, 0, 0, 0.15);
  --box-shadow-hover: 0 6px 20px rgba(0, 0, 0, 0.25);
  --box-shadow-inset: inset 0 1px 4px rgba(0, 0, 0, 0.2);
  
  
  --spacing-xs: 5px;
  --spacing-sm: 10px;
  --spacing-md: 15px;
  --spacing-lg: 20px;
  --spacing-xl: 30px;
  
  
  --transition-fast: 0.2s ease-in-out;
  --transition-medium: 0.3s ease-in-out;
  
  
  --font-main: 'Georgia', serif; 
  --font-heading: 'Palatino Linotype', 'Book Antiqua', Palatino, serif; 
  --font-size-small: 0.85rem;
  --font-size-normal: 1rem;
  --font-size-medium: 1.2rem;
  --font-size-large: 1.5rem;
  --font-size-xlarge: 2.2rem; 
}


*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

body {
  margin: 0;
  color: var(--color-text-dark);
  background-color: var(--color-background-light);
  line-height: 1.6;
  font-size: var(--font-size-normal);
  font-family: var(--font-main);
  background: var(--color-background-light) url('../img/background/main_bg.jpg') repeat;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden; 
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  color: var(--color-primary);
  line-height: 1.2;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--transition-fast);
}

a:hover {
  color: var(--color-accent);
}

.btn,
.styled-btn,
button,
input[type="submit"] {
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast), color var(--transition-fast);
}

.btn:hover,
.styled-btn:hover,
button:hover,
input[type="submit"]:hover {
  transform: translateY(-1px);
  box-shadow: var(--box-shadow-hover);
}

.btn:active,
.styled-btn:active,
button:active,
input[type="submit"]:active {
  transform: translateY(0);
  box-shadow: var(--box-shadow-default);
}

#village-view-graphic .building-placeholder {
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
}

#village-view-graphic .building-placeholder:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: var(--box-shadow-hover), 0 6px 12px rgba(0, 0, 0, 0.2);
  filter: brightness(1.05);
}

.queue-item,
.building-item {
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast);
}

.queue-item:hover,
.building-item:hover {
  transform: translateY(-1px);
  box-shadow: var(--box-shadow-hover);
  background-color: rgba(0,0,0,0.02);
}
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
textarea,
select {
  width: 100%;
  padding: var(--spacing-sm);
  margin-bottom: var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-small);
  font-family: var(--font-main);
  font-size: var(--font-size-normal);
  color: var(--color-text-dark);
  background-color: #fff;
  box-shadow: var(--box-shadow-inset);
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
}

input[type="text"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
input[type="number"]:focus,
textarea:focus,
select:focus {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);
  outline: none;
}


#game-container {
  max-width: 1200px;
  width: min(1200px, calc(100% - 20px));
  margin: 20px auto;
  background-color: var(--color-background-light);
  border: 2px solid var(--color-primary);
  box-shadow: var(--box-shadow-default);
  border-radius: var(--border-radius-medium);
  overflow: hidden;
  flex-grow: 1; 
}

#game-container.game-shell {
  max-width: 1400px;
  width: min(1400px, calc(100% - 24px));
  margin: 20px auto 40px;
  background: linear-gradient(135deg, rgba(240, 230, 208, 0.9), rgba(224, 206, 176, 0.9));
  border-radius: var(--border-radius-large);
  box-shadow: var(--box-shadow-hover);
}


#main-header {
  background: linear-gradient(to bottom, var(--color-primary), var(--color-secondary));
  color: var(--color-text-light);
  padding: var(--spacing-md) var(--spacing-lg);
  border-bottom: 2px solid var(--color-primary);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
}

.header-title {
  display: flex;
  align-items: center;
  font-size: var(--font-size-xlarge); 
  font-weight: bold;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4); 
}

.game-logo {
  margin-right: var(--spacing-sm);
  font-size: var(--font-size-xlarge); 
  color: var(--color-accent); 
}

.header-user {
  text-align: right;
  font-size: var(--font-size-small);
  padding: var(--spacing-xs) var(--spacing-sm);
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: var(--border-radius-small);
  box-shadow: var(--box-shadow-inset);
}

.header-top-row {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-md);
  flex-wrap: wrap;
}

.header-meta-grid {
  width: 100%;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-sm);
}

.meta-card {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: var(--border-radius-small);
  padding: var(--spacing-sm) var(--spacing-md);
  color: var(--color-text-light);
  box-shadow: var(--box-shadow-inset);
}

.meta-label {
  display: block;
  font-size: var(--font-size-small);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.85;
}

.meta-value {
  display: block;
  font-weight: bold;
  margin-top: 4px;
}

.meta-resources {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
  gap: 4px;
}

.meta-resources span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: var(--font-size-small);
}

.meta-resources img {
  width: 16px;
  height: 16px;
}

.header-links a {
  color: var(--color-text-light);
  text-decoration: none;
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--border-radius-small);
  transition: background-color var(--transition-fast);
}

.header-links a:hover {
  background-color: rgba(255, 255, 255, 0.2);
}


#messages-container {
  width: 100%;
  margin: var(--spacing-md) 0;
  padding: 0 var(--spacing-md);
}

p.success-message, .success {
  color: var(--color-success);
  background-color: var(--color-success-bg);
  border-left: 4px solid var(--color-success);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  margin: var(--spacing-sm) 0;
  box-shadow: var(--box-shadow-default);
}

p.error-message, .error {
  color: var(--color-error);
  background-color: var(--color-error-bg);
  border-left: 4px solid var(--color-error);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  margin: var(--spacing-sm) 0;
  box-shadow: var(--box-shadow-default);
}

p.info-message, .info {
  color: var(--color-info);
  background-color: var(--color-info-bg);
  border-left: 4px solid var(--color-info);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  margin: var(--spacing-sm) 0;
  box-shadow: var(--box-shadow-default);
}


button, input[type="submit"], .btn {
  background: linear-gradient(to bottom, var(--color-accent), var(--color-accent-dark));
  color: var(--color-text-dark); 
  border: 1px solid var(--color-accent-dark); 
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--border-radius-small);
  cursor: pointer;
  font-weight: bold;
  transition: all var(--transition-fast);
  text-decoration: none;
  display: inline-block;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  text-align: center;
  text-transform: uppercase; 
  letter-spacing: 0.5px;
}

button:hover, input[type="submit"]:hover, .btn:hover {
  background: linear-gradient(to bottom, var(--color-accent-dark), var(--color-accent));
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

button:active, input[type="submit"]:active, .btn:active {
  transform: translateY(0);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

button:disabled, input[type="submit"]:disabled {
  background: var(--color-background-dark);
  color: #999;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.btn-primary {
  background: linear-gradient(to bottom, var(--color-accent), var(--color-accent-dark));
  color: var(--color-text-dark);
  border: 1px solid var(--color-accent-dark);
}

.btn-primary:hover {
  background: linear-gradient(to bottom, var(--color-accent-dark), var(--color-accent));
}

.btn.btn-secondary {
  background: transparent;
  color: var(--color-text-light);
  border: 2px solid var(--color-text-light);
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}


.hero {
  position: relative;
  height: 65vh;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.6);
}

.hero::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.2)); 
}

.hero-content {
  position: relative;
  max-width: 800px;
  text-align: center;
  color: #fff;
  padding: var(--spacing-lg);
  animation: fadeIn 1.5s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.hero-content h2 {
  font-size: 3rem;
  margin-bottom: var(--spacing-md);
  line-height: 1.2;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
  font-family: var(--font-heading);
}

.hero-content p {
  font-size: 1.3rem;
  margin-bottom: var(--spacing-lg);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.hero-buttons {
  display: flex;
  justify-content: center;
  gap: var(--spacing-md);
}

.hero-buttons .btn {
  padding: var(--spacing-md) var(--spacing-xl);
  font-size: 1.1rem;
  min-width: 180px;
}


@media (max-width: 900px) {
  .hero-content h2 {
    font-size: 2rem;
  }
  
  .hero-content p {
    font-size: 1rem;
  }
  
  .hero-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .hero-buttons .btn {
    width: 100%;
    margin-bottom: var(--spacing-sm);
  }
  
  #main-content {
    flex-direction: column;
  }
  
  #sidebar {
    width: 100%;
    border-right: none;
    border-bottom: 2px solid var(--color-primary);
  }
  
  #resources-bar {
    flex-direction: column;
    gap: var(--spacing-xs);
  }
  
  .building-placeholder {
    min-width: 80px;
    min-height: 60px;
  }
}

@media (max-width: 600px) {
  #main-header {
    flex-direction: column;
    text-align: center;
  }
  
  .header-title {
    margin-bottom: var(--spacing-sm);
  }
  
  .header-user {
    width: 100%;
    text-align: center;
  }

  .header-top-row {
    flex-direction: column;
    align-items: center;
  }

  .header-meta-grid {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }
}


#main-content {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

#main-content.with-sidebar {
  flex-direction: row;
  align-items: flex-start;
}

#main-content.with-sidebar #sidebar {
  flex: 0 0 220px;
}

#main-content.with-sidebar main,
#main-content.with-sidebar .content-area {
  flex: 1;
}

#sidebar {
  width: 220px;
  background-color: var(--color-background-dark);
  border-right: 2px solid var(--color-primary);
  padding: var(--spacing-md) 0;
}

#sidebar ul {
    list-style: none;
}

#sidebar li {
  margin-bottom: 2px;
}

#sidebar a {
    display: block;
  padding: var(--spacing-sm) var(--spacing-lg);
  color: var(--color-secondary);
  text-decoration: none;
    font-weight: bold;
  transition: background-color var(--transition-fast);
  border-left: 4px solid transparent;
}

#sidebar a:hover, #sidebar a.active {
  background-color: var(--color-background-light);
  border-left: 4px solid var(--color-primary);
  color: var(--color-primary);
}

main {
  flex: 1;
  padding: var(--spacing-lg);
}


main h2 {
  font-size: 1.5rem;
  color: var(--color-secondary);
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-xs);
  border-bottom: 2px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

main h3 {
  font-size: 1.3rem;
  color: var(--color-primary);
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-sm);
}


#resources-bar {
    display: flex;
  justify-content: space-between;
  background-color: var(--color-background-dark);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  margin-bottom: var(--spacing-md);
  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
}

#resources-bar .res {
    display: flex;
    align-items: center;
    font-weight: bold;
  font-size: 0.9rem;
}

.res-icon-img {
  width: 24px;
  height: 24px;
  margin-right: var(--spacing-xs);
}

.production-rate {
    font-size: 0.8rem;
    color: var(--color-primary);
    margin-left: 5px;
}


#village-info {
  background-color: rgba(255, 255, 255, 0.5);
  padding: var(--spacing-md);
  border-radius: var(--border-radius-small);
  margin-bottom: var(--spacing-lg);
  border: 1px solid var(--color-border);
}

#village-info h2 {
  margin-top: 0;
}

.coords {
  font-size: 0.9rem;
  color: var(--color-accent);
  font-weight: normal;
}

.last-update {
  font-size: 0.8rem;
  color: var(--color-primary);
  font-style: italic;
  margin-top: var(--spacing-xs);
  text-align: right;
}


.main-game-content {
  display: grid;
  grid-template-columns: minmax(280px, 540px) 1fr;
  gap: var(--spacing-lg);
  align-items: start;
}

#village-view-graphic {
  position: relative; 
  width: 100%; 
  max-width: none;
  min-height: 520px;
  margin: 0 auto; 
  background-color: var(--color-background-medium);
  background-image: url('../img/village_bg.jpg');
  background-size: cover;
  background-position: center;
  border: 2px solid var(--color-primary);
  border-radius: var(--border-radius-medium);
  box-shadow: var(--box-shadow-default);
  overflow: hidden;
}

#village-view-graphic > img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
}

@media (max-width: 1100px) {
  .main-game-content {
    grid-template-columns: 1fr;
  }

  #village-view-graphic {
    margin-bottom: var(--spacing-lg);
  }

  .building-list-section {
    margin-top: var(--spacing-xl);
  }
}

@media (max-width: 720px) {
  .placeholder-text {
    font-size: 0.7rem;
  }
}



.building-placeholder {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast), filter var(--transition-fast);
  flex-direction: column;
}

.building-placeholder:hover {
  background-color: rgba(255, 255, 255, 0.9);
  transform: translateY(-2px) scale(1.02);
  box-shadow: var(--box-shadow-hover), 0 6px 12px rgba(0, 0, 0, 0.3);
  filter: brightness(1.05);
  z-index: 10;
}

.building-placeholder.building-upgrading {
    border-color: var(--color-accent); 
    box-shadow: 0 0 8px var(--color-accent), 0 3px 6px rgba(0, 0, 0, 0.3); 
    animation: pulse-accent 1.5s infinite alternate; 
}

@keyframes pulse-accent {
    from { box-shadow: 0 0 8px var(--color-accent), 0 3px 6px rgba(0, 0, 0, 0.3); }
    to { box-shadow: 0 0 15px var(--color-accent), 0 6px 12px rgba(0, 0, 0, 0.4); }
}

.building-icon {
  max-width: 100%; 
  max-height: 100%; 
  margin-bottom: 5px;
  pointer-events: none;
}

.placeholder-text {
  font-size: 0.8rem;
    font-weight: bold;
  color: var(--color-text-light); 
  background-color: rgba(0, 0, 0, 0.5); 
  padding: 2px 5px; 
  border-radius: 3px; 
  margin-top: 2px;
  transition: opacity var(--transition-fast);
  opacity: 0.9;
}

.building-placeholder:hover .placeholder-text {
  opacity: 1;
}

.building-item {
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-small);
  padding: var(--spacing-md);
  background: #fff;
  box-shadow: var(--box-shadow-default);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background-color var(--transition-fast);
}

.building-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--box-shadow-hover);
  background-color: rgba(0,0,0,0.02);
}

.building-item h3 {
  margin-bottom: var(--spacing-xs);
}

.building-item p {
  margin-bottom: var(--spacing-xs);
}

.building-item .upgrade-status {
  font-weight: bold;
  color: var(--color-primary);
}

.building-item .upgrade-timer {
  font-weight: bold;
  color: var(--color-accent);
}

.building-item .resource img {
  width: 14px;
  height: 14px;
  margin-right: 4px;
}


table {
  width: 100%;
  border-collapse: collapse;
  margin: var(--spacing-md) 0;
  background-color: #fff;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-small);
  overflow: hidden;
}

th, td {
  padding: var(--spacing-sm);
  text-align: left;
  border-bottom: 1px solid var(--color-border);
}

th {
  background-color: var(--color-background-dark);
  color: var(--color-secondary);
  font-weight: bold;
}

tr:last-child td {
  border-bottom: none;
}

tr:hover {
  background-color: rgba(255, 255, 255, 0.8);
}


#building-details-popup {
  display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  background-color: var(--color-background-light);
  padding: var(--spacing-lg);
  border: 2px solid var(--color-primary);
  border-radius: var(--border-radius-medium);
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  width: 90%;
  max-width: 500px;
  z-index: 1001;
  max-height: 80vh;
  overflow-y: auto;
}


.building-list-section {
    margin-top: 0;
}

.building-list-section h2 {
    margin-bottom: var(--spacing-lg);
    text-align: center;
    font-size: var(--font-size-large);
    color: var(--color-primary);
}

.buildings-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-lg);
}

.building-item {
    background-color: #fff;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-lg);
    box-shadow: var(--box-shadow-default);
    transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.building-item:hover {
    transform: translateY(-3px);
    box-shadow: var(--box-shadow-hover);
}

.building-item h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-sm);
    color: var(--color-secondary);
    font-size: var(--font-size-medium);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-xs);
}

.building-item p {
    font-size: var(--font-size-normal);
    margin-bottom: var(--spacing-sm);
    color: #555;
}

.building-item .upgrade-status {
    font-weight: bold;
    color: var(--color-primary);
    margin-bottom: var(--spacing-xs);
}

.building-item .upgrade-timer {
    font-size: var(--font-size-small);
    color: var(--color-success);
    font-weight: bold;
    margin-bottom: var(--spacing-sm);
}

.building-item .upgrade-unavailable-reason {
    font-size: var(--font-size-small);
    color: var(--color-error);
    font-style: italic;
    margin-top: var(--spacing-xs);
}

.building-requirements {
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    background-color: var(--color-background-alt);
}

.building-requirements p {
    font-weight: bold;
    margin-bottom: var(--spacing-sm);
}

.building-requirements ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.building-requirements li {
    margin-bottom: var(--spacing-xs);
    padding-left: 15px; 
    position: relative;
}

.requirement-met {
    color: var(--color-success);
}

.requirement-not-met {
    color: var(--color-error);
}


.requirement-met::before {
    content: 'OK'; 
    position: absolute;
    left: 0;
}

.requirement-not-met::before {
    content: 'X'; 
    position: absolute;
    left: 0;
}

.building-info-details {
    font-size: var(--font-size-small);
    color: var(--color-primary);
    margin-top: var(--spacing-sm);
    padding-top: var(--spacing-sm);
    border-top: 1px dashed var(--color-border);
}


#building-details-popup.main-building-popup {
  max-width: 800px;
  width: 95%;
}

#building-details-popup h3 {
  border-bottom: 1px solid var(--color-border);
  padding-bottom: var(--spacing-sm);
    margin-top: 0;
}

#building-details-popup h4 {
  margin: var(--spacing-sm) 0;
  color: var(--color-secondary);
}

#popup-building-info, #popup-upgrade-info {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-sm);
  border-top: 1px solid var(--color-border);
}

.resource-cost {
  display: inline-flex;
  align-items: center;
  margin-right: var(--spacing-sm);
}

.resource-cost img {
  width: 20px;
  height: 20px;
  margin-right: 3px;
}

.upgrade-info button {
  margin-top: var(--spacing-sm);
  width: 100%;
}

.upgrade-not-available {
  color: var(--color-error);
  font-style: italic;
}

.upgrade-in-progress {
  background-color: rgba(40, 167, 69, 0.1);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  border-left: 4px solid var(--color-success);
}

#popup-close-btn {
  margin-top: var(--spacing-md);
  width: 100%;
}

#popup-overlay {
  display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  z-index: 1000;
}


.main-building-upgrade-table {
  margin-top: var(--spacing-md);
  max-height: 400px;
  overflow-y: auto;
}

.upgrade-buildings-table {
  width: 100%;
  font-size: 0.9rem;
  margin-top: var(--spacing-sm);
}

.upgrade-buildings-table th, 
.upgrade-buildings-table td {
  padding: var(--spacing-xs) var(--spacing-sm);
  text-align: left;
  vertical-align: middle;
}

.upgrade-buildings-table thead {
  position: sticky;
  top: 0;
  background-color: var(--color-background-dark);
  color: var(--color-secondary);
  z-index: 1;
}

.upgrade-buildings-table tbody tr:hover {
  background-color: rgba(255, 255, 255, 0.5);
}

.upgrade-buildings-table button {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: 0.8rem;
  width: 100%;
}

.upgrade-buildings-table .resource-cost {
  font-size: 0.8rem;
  margin-right: var(--spacing-xs);
  display: block;
}

.upgrade-buildings-table .resource-cost img {
  width: 16px;
  height: 16px;
}


#building-queue {
    background-color: var(--color-background-light);
    border: 1px solid var(--color-background-dark);
    border-radius: var(--border-radius-medium);
  padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    box-shadow: var(--box-shadow-default);
}

#building-queue h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    border-bottom: 1px solid var(--color-background-dark);
    padding-bottom: var(--spacing-sm);
}

.queue-content {
    margin-top: var(--spacing-sm);
}

.queue-empty {
    text-align: center;
    color: #777;
    font-style: italic;
    padding: var(--spacing-md) 0;
}

.queue-item {
    background-color: #fff;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    display: flex;
    flex-direction: column;
    box-shadow: var(--box-shadow-small);
}

.queue-item.current {
    border-left: 3px solid var(--color-primary);
}

.queue-item:hover {
    background-color: var(--color-background-medium);
}

.item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-xs);
}

.item-title {
    flex-grow: 1;
    margin-right: var(--spacing-sm);
    font-weight: bold;
    color: var(--color-secondary);
}

.building-name, .unit-name {
    color: var(--color-primary);
}

.building-level, .unit-count {
    font-weight: normal;
    color: #555;
}

.item-actions {
    flex-shrink: 0;
}

.cancel-button {
    background-color: var(--color-error);
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: var(--font-size-small);
    cursor: pointer;
    transition: background-color var(--transition-fast);
}

.cancel-button:hover {
    background-color: darken(var(--color-error), 10%); 
}

.item-progress {
    margin-top: var(--spacing-xs);
}

.progress-bar {
    width: 100%;
    height: 8px;
    background-color: var(--color-background-dark);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background-color: var(--color-success);
    transition: width 1s linear; 
}

.progress-time {
    font-size: var(--font-size-small);
    text-align: right;
    color: #777;
    margin-top: 3px;
}


.map-section {
    background-color: var(--color-background-light);
    border: 1px solid var(--color-background-dark);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    text-align: center;
    box-shadow: var(--box-shadow-default);
}

.map-section h3 {
    margin-top: 0;
    margin-bottom: var(--spacing-sm);
    color: var(--color-primary);
}

.map-section p {
    margin-bottom: var(--spacing-md);
    color: #555;
}

.map-link-btn {
    display: inline-block;
    background-color: var(--color-secondary);
    color: white;
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-small);
    text-decoration: none;
    font-weight: bold;
    transition: background-color var(--transition-fast);
}

.map-link-btn:hover {
    background-color: darken(var(--color-secondary), 10%); 
}


.recruitment-queue-container,
.current-units-container,
.recruitment-container {
  margin-top: var(--spacing-md);
  border-top: 1px solid var(--color-border);
  padding-top: var(--spacing-sm);
}

.current-units-table,
.recruitment-queue, 
.recruitment-units {
    width: 100%;
  margin-top: var(--spacing-sm);
    border-collapse: collapse;
  font-size: 0.9rem;
}

.recruitment-units th,
.recruitment-units td,
.current-units-table th,
.current-units-table td,
.recruitment-queue th,
.recruitment-queue td {
  padding: var(--spacing-xs) var(--spacing-sm);
  text-align: left;
  border-bottom: 1px solid var(--color-border);
}

.recruitment-units thead,
.current-units-table thead,
.recruitment-queue thead {
  background-color: var(--color-background-dark);
}

.recruitment-units tbody tr:hover,
.current-units-table tbody tr:hover,
.recruitment-queue tbody tr:hover {
  background-color: rgba(255, 255, 255, 0.5);
}

.recruitment-units input[type="number"] {
  width: 70px;
  padding: var(--spacing-xs);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-small);
}

.recruitment-units td small {
    display: block;
  font-size: 0.8rem;
  color: var(--color-primary);
  margin-top: var(--spacing-xs);
}

.recruitment-queue tr.completed {
  background-color: var(--color-success-bg);
}

.recruitment-summary {
  margin-top: var(--spacing-md);
  padding: var(--spacing-sm);
  background-color: var(--color-background-medium);
  border-radius: var(--border-radius-small);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.warning-message {
  color: #856404;
  background-color: #fff3cd;
  border-left: 4px solid #ffeeba;
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-small);
  margin: var(--spacing-xs) 0;
}


.recruitment-queue .unit-in-progress {
  font-weight: bold;
  color: var(--color-success);
}


.unit-icon {
  width: 40px;
  height: 40px;
  object-fit: contain;
  margin-right: var(--spacing-sm);
}


.unit-info {
  display: flex;
  align-items: center;
}

.unit-info div {
  display: flex;
  flex-direction: column;
}


.current-units-table .unit-cell {
  display: flex;
  align-items: center;
}


button.styled-btn, input[type="submit"].styled-btn {
  background: url('../img/btn/buttons.png') no-repeat;
  background-size: contain;
  background-position: center;
  border: none;
  color: var(--color-text-light);
  padding: var(--spacing-sm) var(--spacing-md);
  transition: transform var(--transition-fast);
}

button.styled-btn:hover, input[type="submit"].styled-btn:hover {
  transform: scale(1.05);
}


.site-header {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) var(--spacing-lg);
    background: linear-gradient(to right, var(--color-primary), var(--color-secondary));
    color: var(--color-text-light);
    box-shadow: var(--box-shadow-default);
    position: relative;
    z-index: 20; 
}

.site-header .logo h1 {
    font-family: var(--font-heading);
    font-size: var(--font-size-xlarge);
    margin: 0;
    color: var(--color-accent); 
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
}

.header-world {
    position: absolute;
    top: var(--spacing-sm);
    right: var(--spacing-lg);
    font-size: var(--font-size-small);
    color: var(--color-background-medium);
    background-color: rgba(0, 0, 0, 0.2);
    padding: 2px 8px;
    border-radius: var(--border-radius-small);
    box-shadow: var(--box-shadow-inset);
}

.world-pill {
    display: inline-block;
    margin-left: 6px;
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius-small);
    color: var(--color-text-light);
}

.offline-indicator {
    display: none;
    margin-left: auto;
    padding: 6px 10px;
    border-radius: 12px;
    background: #402020;
    color: #fbe5e5;
    font-size: 13px;
    align-items: center;
    gap: 6px;
    border: 1px solid rgba(255, 107, 107, 0.4);
}

.offline-indicator .dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ff6b6b;
    display: inline-block;
    box-shadow: 0 0 6px rgba(255, 107, 107, 0.8);
}

.body-offline .offline-indicator {
    display: inline-flex;
}

.body-offline #resource-bar,
.body-offline .resource-bar {
    opacity: 0.75;
}

.disabled-offline {
    opacity: 0.6;
    pointer-events: none;
}

.mobile-nav-toggle {
    display: none;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border-radius: var(--border-radius-small);
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(0, 0, 0, 0.2);
    color: var(--color-text-light);
    cursor: pointer;
    padding: 8px;
    transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.mobile-nav-toggle:hover {
    background: rgba(0, 0, 0, 0.35);
    transform: translateY(-1px);
}

.mobile-nav-toggle .bar {
    display: block;
    width: 100%;
    height: 2px;
    background: currentColor;
    border-radius: 2px;
    transition: transform var(--transition-fast), opacity var(--transition-fast);
}

.mobile-nav-toggle .bar + .bar {
    margin-top: 5px;
}

.mobile-nav-toggle[aria-expanded="true"] span.bar:nth-of-type(2) {
    transform: translateY(7px) rotate(45deg);
}

.mobile-nav-toggle[aria-expanded="true"] span.bar:nth-of-type(3) {
    opacity: 0;
}

.mobile-nav-toggle[aria-expanded="true"] span.bar:nth-of-type(4) {
    transform: translateY(-7px) rotate(-45deg);
}

.main-nav {
    display: flex;
    gap: var(--spacing-md);
    align-items: center;
}

.main-nav a {
    color: var(--color-text-light);
    text-decoration: none;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--border-radius-small);
    transition: background-color var(--transition-fast), color var(--transition-fast);
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 5px;
}

.main-nav a:hover,
.main-nav a.active {
    background-color: var(--color-accent);
    color: var(--color-primary);
    box-shadow: var(--box-shadow-inset);
}

.main-nav a i {
    font-size: 1.1rem;
}

@media (max-width: 900px) {
    .site-header {
        align-items: flex-start;
        gap: var(--spacing-sm);
    }

    .mobile-nav-toggle {
        display: inline-flex;
        order: 2;
    }

    .site-header .main-nav {
        display: none;
        order: 3;
        width: 100%;
        flex-direction: column;
        gap: var(--spacing-xs);
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: var(--border-radius-small);
        padding: var(--spacing-sm);
        box-shadow: var(--box-shadow-default);
    }

    .site-header .main-nav.is-open {
        display: flex;
    }

    .site-header .main-nav a {
        width: 100%;
    }

    .header-world {
        position: static;
        order: 4;
        margin-left: auto;
    }
}


.notifications-icon {
    position: relative;
    margin-left: var(--spacing-md);
}

.notifications-icon a {
    position: relative;
    padding: var(--spacing-xs) var(--spacing-sm);
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: var(--border-radius-small);
}

.notifications-icon a:hover {
    background-color: rgba(0, 0, 0, 0.4);
}

.notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--color-error);
    color: white;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 0.7rem;
    font-weight: bold;
    min-width: 20px;
    text-align: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}


#notifications-dropdown {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background-color: var(--color-background-light);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    box-shadow: var(--box-shadow-default);
    min-width: 300px;
    max-width: 90vw;
    z-index: 100;
    padding: var(--spacing-md);
    margin-top: var(--spacing-xs);
}

#notifications-dropdown.show {
    display: block;
}

#notifications-dropdown h3 {
    color: var(--color-primary);
    margin-top: 0;
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-sm);
}

#notifications-list {
    max-height: 300px;
    overflow-y: auto;
    margin-bottom: var(--spacing-md);
}

.no-notifications {
    text-align: center;
    color: #777;
    padding: var(--spacing-md);
}

.notifications-list-items {
    list-style: none;
    padding: 0;
    margin: 0;
}

.notification-item {
    display: flex;
    align-items: flex-start;
    background-color: #fff;
    border: 1px solid var(--color-background-medium);
    border-radius: var(--border-radius-small);
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-sm);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: background-color var(--transition-fast);
}

.notification-item:hover {
    background-color: var(--color-background-light);
}

.notification-item.notification-success { border-left: 4px solid var(--color-success); }
.notification-item.notification-error { border-left: 4px solid var(--color-error); }
.notification-item.notification-info { border-left: 4px solid var(--color-info); }

.notification-icon {
    margin-right: var(--spacing-sm);
    font-size: 1.2rem;
    color: var(--color-primary);
}

.notification-item.notification-success .notification-icon { color: var(--color-success); }
.notification-item.notification-error .notification-icon { color: var(--color-error); }
.notification-item.notification-info .notification-icon { color: var(--color-info); }

.notification-content {
    flex-grow: 1;
}

.notification-message {
    font-size: var(--font-size-normal);
    color: var(--color-text-dark);
    margin-bottom: 3px;
}

.notification-time {
    font-size: var(--font-size-small);
    color: #777;
}

.mark-read-btn {
    background: none;
    border: none;
    color: var(--color-secondary);
    cursor: pointer;
    font-size: 1rem;
    margin-left: var(--spacing-sm);
    transition: color var(--transition-fast);
}

.mark-read-btn:hover {
    color: var(--color-primary);
}

.notifications-footer {
    text-align: center;
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-sm);
}

.notifications-footer a {
    color: var(--color-secondary);
    font-size: var(--font-size-small);
    font-weight: bold;
}

.notifications-footer a:hover {
    color: var(--color-primary);
}


.guides-container {
  max-width: 1100px;
  margin: 30px auto;
  background: rgba(255, 255, 255, 0.9);
  padding: 20px;
  border-radius: var(--border-radius-large);
  box-shadow: var(--box-shadow-default);
}

.guides-hero {
  display: flex;
  justify-content: space-between;
  gap: 16px;
  align-items: center;
  margin-bottom: 16px;
}

.guides-search {
  display: flex;
  gap: 8px;
}

.guides-search input {
  min-width: 220px;
}

.guides-layout {
  display: grid;
  grid-template-columns: 260px 1fr;
  gap: 16px;
}

.guides-filters .panel {
  padding: 12px;
}

.filter-label {
  display: block;
  font-weight: 700;
  color: var(--color-primary);
  margin: 8px 0 4px;
}

.guide-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 12px;
}

.guide-card {
  padding: 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  background: #fffaf0;
  box-shadow: var(--box-shadow-default);
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.guide-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--box-shadow-hover);
}

.guide-tags {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 6px;
}

.guide-tag {
  background: rgba(90, 58, 43, 0.1);
  color: var(--color-primary);
  padding: 2px 6px;
  border-radius: 999px;
  font-size: 0.85rem;
  font-weight: 700;
}

.guide-detail {
  padding: 16px;
  margin-top: 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  background: #fff;
  box-shadow: var(--box-shadow-default);
}

.guide-detail h2 {
  margin: 6px 0;
}

.guide-detail #guide-detail-body p {
  margin-bottom: 10px;
}

.guide-empty {
  padding: 10px;
  color: #6d5c4c;
}

.text-button {
  background: none;
  border: none;
  color: var(--color-primary);
  font-weight: 700;
  cursor: pointer;
  padding: 4px 0;
}

@media (max-width: 900px) {
  .guides-layout {
    grid-template-columns: 1fr;
  }
  .guides-hero {
    flex-direction: column;
    align-items: flex-start;
  }
  .guides-search {
    width: 100%;
  }
  .guides-search input {
    flex: 1;
  }
}


.resource-bar {
    background-color: var(--color-background-dark);
    padding: var(--spacing-sm);
    border-top: 1px solid var(--color-primary);
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.resource-bar ul {
    display: flex;
    list-style: none;
    padding: 0;
    margin: 0;
    gap: var(--spacing-lg);
    flex-wrap: wrap;
    justify-content: center;
}

.resource-bar li {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.9rem;
    padding: 5px 10px;
    border-radius: var(--border-radius-small);
    background-color: var(--color-background-light);
    box-shadow: var(--box-shadow-inset);
    position: relative;
}

.resource-bar li img {
    width: 16px;
    height: 16px;
    margin-right: 3px;
}

.resource-bar li {
    min-height: 42px;
}


.resource-wood, .resource-clay, .resource-iron, .resource-population {
    position: relative;
    min-width: 120px;
    transition: background-color 0.3s ease;
}

.resource-value {
    font-weight: bold;
    transition: color 0.3s ease;
}

@media (max-width: 640px) {
    .resource-bar ul {
        justify-content: flex-start;
        gap: var(--spacing-sm);
    }

    .resource-bar li {
        min-width: 140px;
    }
}

.resource-capacity {
    font-size: 0.8rem;
    color: #777;
    margin-left: 5px;
}

.resource-production {
    display: block;
    position: absolute;
    font-size: 0.7rem;
    color: var(--color-success);
    top: -8px;
    right: 5px;
    background-color: rgba(255, 255, 255, 0.7);
    padding: 1px 4px;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.resource-almost-full {
    color: #d35400 !important;
    animation: pulse-warning 2s infinite;
}

.resource-full {
    color: #c0392b !important;
    animation: pulse-error 1s infinite;
}

@keyframes pulse-warning {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
}

@keyframes pulse-error {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}


.resource-tooltip {
    position: absolute;
    display: none;
    z-index: 1000;
    background-color: var(--color-background-light);
    border: 1px solid var(--color-primary);
    border-radius: var(--border-radius-small);
    box-shadow: var(--box-shadow-default);
    padding: 8px 10px;
    font-size: 0.8rem;
    color: var(--color-primary);
    width: 180px;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 5px;
}

.resource-wood:hover .resource-tooltip,
.resource-clay:hover .resource-tooltip,
.resource-iron:hover .resource-tooltip {
    display: block;
}

.resource-tooltip::before {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 0 6px 6px 6px;
    border-style: solid;
    border-color: transparent transparent var(--color-background-light) transparent;
    z-index: 1;
}

.resource-tooltip::after {
    content: '';
    position: absolute;
    top: -7px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 0 7px 7px 7px;
    border-style: solid;
    border-color: transparent transparent var(--color-primary) transparent;
    z-index: 0;
}

.resource-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 3px;
}

.resource-info-label {
    font-weight: bold;
}

.resource-bar-outer {
    width: 100%;
    height: 6px;
    background-color: #ddd;
    border-radius: 3px;
    overflow: hidden;
    margin-top: 5px;
}

.resource-bar-inner {
    height: 100%;
    background-color: var(--color-primary);
    border-radius: 3px;
    transition: width 0.3s ease;
}


#ds-topbar {
    background-color: var(--color-primary);
    color: var(--color-text-light);
    padding: 10px 20px;
    border-bottom: 1px solid var(--color-secondary);
}

#ds-topbar .ds-nav {
    display: flex;
    justify-content: center;
    gap: 20px;
}

#ds-topbar .ds-nav a {
    display: flex;
    align-items: center;
    color: var(--color-text-light);
    text-decoration: none;
    padding: 5px 10px;
    border-radius: 4px;
    transition: background-color 0.2s;
    font-weight: bold;
}

#ds-topbar .ds-nav a:hover {
    background-color: var(--color-secondary);
}

#ds-topbar .ds-nav a img {
    width: 24px;
    height: 24px;
    margin-right: 8px;
}


#game-container .main-nav {
    display: none;
}

.site-header .main-nav {
    display: flex;
}


.form-container {
    max-width: 400px;
    margin: 60px auto;
    padding: 40px;
    background-color: var(--color-background-light); 
    border-radius: var(--border-radius-large); 
    box-shadow: var(--box-shadow-hover); 
    border: 1px solid var(--color-border); 
    text-align: center;
}

.form-container h1 {
    color: var(--color-primary); 
    margin-bottom: 30px;
    font-size: var(--font-size-xlarge); 
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
}

.form-container label {
    display: block;
    text-align: left;
    margin-bottom: 8px;
    color: var(--color-secondary); 
    font-weight: bold;
    font-size: var(--font-size-normal); 
}

.form-container input[type="text"],
.form-container input[type="email"],
.form-container input[type="password"] {
    width: 100%;
    padding: 12px 15px;
    margin-bottom: 20px;
    border: 1px solid var(--color-border); 
    border-radius: var(--border-radius-small); 
    background-color: var(--color-background-medium); 
    color: var(--color-text-dark); 
    font-size: var(--font-size-normal); 
    box-shadow: var(--box-shadow-inset); 
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    box-sizing: border-box;
}

.form-container input[type="text"]:focus,
.form-container input[type="email"]:focus,
.form-container input[type="password"]:focus {
    border-color: var(--color-primary); 
    box-shadow: 0 0 5px rgba(var(--color-primary-rgb), 0.5); 
    outline: none;
}

.form-container .btn-primary {
    display: block;
    width: 100%;
    padding: 12px;
    font-size: var(--font-size-large); 
    margin-top: 10px;
    margin-bottom: 20px;
}

.form-container .error-message {
    color: var(--color-error); 
    background-color: var(--color-error-bg); 
    border: 1px solid var(--color-error); 
    padding: 10px;
    margin-bottom: 20px;
    border-radius: var(--border-radius-small); 
    font-weight: bold;
}

.form-container p {
    font-size: var(--font-size-normal); 
    color: #555;
    margin-bottom: 10px;
}

.form-container p a {
    color: var(--color-primary); 
    text-decoration: none;
    transition: color var(--transition-fast);
}

.form-container p a:hover {
    color: var(--color-accent); 
    text-decoration: underline;
}


@media (max-width: 500px) {
    .form-container {
        margin: 30px 15px;
        padding: 30px 20px;
    }
}

.features {
    padding: var(--spacing-xl) var(--spacing-lg); 
    background-color: var(--color-background-light);
    border-top: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
}
.features h2 {
    text-align: center;
    margin-bottom: var(--spacing-xl); 
    color: var(--color-primary);
    font-size: var(--font-size-xlarge);
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
}
.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px,1fr)); 
    gap: var(--spacing-xl);
    max-width: 1200px;
    margin: 0 auto;
}
.feature-card {
    background-color: #fff;
    padding: var(--spacing-xl); 
    border-radius: var(--border-radius-large); 
    text-align: center;
    box-shadow: var(--box-shadow-default);
    transition: transform var(--transition-medium), box-shadow var(--transition-medium);
    border: 1px solid var(--color-border);
    position: relative;
    overflow: hidden;
}
.feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(255,255,255,0.1), rgba(255,255,255,0));
    z-index: 0;
    pointer-events: none;
}
.feature-card:hover {
    transform: translateY(-8px); 
    box-shadow: var(--box-shadow-hover);
}
.feature-icon {
    width: 90px; 
    height: 90px;
    margin: 0 auto var(--spacing-lg); 
    background-color: var(--color-background-medium);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--box-shadow-inset);
    border: 2px solid var(--color-accent); 
}
.feature-icon img {
    max-width: 65%; 
    max-height: 65%;
    margin-bottom: 0;
}
.feature-card h3 {
    margin: var(--spacing-md) 0 var(--spacing-sm);
    color: var(--color-primary);
    font-size: var(--font-size-large); 
    border-bottom: 1px solid var(--color-background-medium);
    padding-bottom: var(--spacing-xs);
}
.feature-card p {
    font-size: var(--font-size-normal);
    color: #555;
    line-height: 1.7; 
    margin-bottom: var(--spacing-lg); 
}
.feature-link {
    display: inline-block;
    background: linear-gradient(to bottom, var(--color-accent), var(--color-accent-dark));
    color: var(--color-text-dark);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-small);
    font-size: var(--font-size-normal); 
    font-weight: bold;
    transition: all var(--transition-fast);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.feature-link:hover {
    background: linear-gradient(to bottom, var(--color-accent-dark), var(--color-accent));
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}


/* === Game overview refresh === */
.game-shell {
  max-width: 1400px;
  margin: 20px auto 40px;
  padding: 24px;
  background: linear-gradient(135deg, rgba(240, 230, 208, 0.9), rgba(224, 206, 176, 0.9));
  border: 2px solid var(--color-primary);
  border-radius: var(--border-radius-large);
  box-shadow: var(--box-shadow-hover);
}

.village-hero {
  display: grid;
  grid-template-columns: 1.05fr 0.95fr;
  gap: 20px;
  background: rgba(255, 255, 255, 0.72);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-large);
  padding: 20px;
  box-shadow: var(--box-shadow-default);
}

.hero-copy h1 {
  font-size: 2rem;
  margin-bottom: 6px;
}

.hero-copy .coords {
  font-size: 0.95rem;
  color: var(--color-secondary);
  margin-left: 6px;
}

.hero-meta {
  color: #5b4634;
  margin-bottom: 10px;
  font-weight: 600;
}

.eyebrow {
  text-transform: uppercase;
  letter-spacing: 1px;
  font-size: 0.75rem;
  color: var(--color-secondary);
  margin-bottom: 4px;
}

.muted {
  color: #6d5c4c;
  font-size: 0.95rem;
}

.hero-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}

.hero-badges .badge {
  background: rgba(90, 58, 43, 0.08);
  color: var(--color-primary);
  border: 1px solid rgba(90, 58, 43, 0.2);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  font-size: 0.9rem;
}

.hud-resources {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 12px;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  padding: 12px;
}

.hud-pill {
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(244, 231, 210, 0.95));
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  padding: 10px;
  box-shadow: var(--box-shadow-default);
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.hud-pill .pill-label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  color: var(--color-primary);
}

.hud-pill .pill-label img {
  width: 18px;
  height: 18px;
}

.hud-pill .pill-value {
  font-size: 1.1rem;
  display: flex;
  align-items: baseline;
  gap: 4px;
}

.hud-pill .pill-sub {
  color: var(--color-success);
  font-size: 0.9rem;
  font-weight: 700;
}

.hero-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 10px;
}

.action-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 14px;
  border-radius: 999px;
  background: linear-gradient(135deg, #fdf1d8, #edd4a1);
  color: var(--color-primary);
  border: 1px solid var(--color-border);
  font-weight: 700;
  box-shadow: var(--box-shadow-default);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

.action-chip:hover {
  transform: translateY(-1px);
  box-shadow: var(--box-shadow-hover);
}

.game-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 20px;
  margin-top: 24px;
}

.panel {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-large);
  padding: 16px;
  box-shadow: var(--box-shadow-default);
  position: relative;
}

.panel::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(180deg, var(--color-accent), var(--color-secondary));
  border-radius: var(--border-radius-medium);
}

.panel-header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: flex-start;
  margin-bottom: 10px;
}

.panel h2, .panel h3 {
  margin: 0;
}

.status-chip, .level-badge {
  background: rgba(90, 58, 43, 0.1);
  color: var(--color-primary);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  border: 1px solid rgba(90, 58, 43, 0.2);
}

.village-view-wrapper {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.village-view {
  position: relative;
  width: 100%;
  min-height: 520px;
  border: 2px solid var(--color-primary);
  border-radius: var(--border-radius-large);
  overflow: hidden;
  background: var(--color-background-medium);
}

.village-background {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.village-view .building-placeholder {
  mix-blend-mode: normal;
}

.village-view-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: rgba(90, 58, 43, 0.08);
  border: 1px solid var(--color-border);
  padding: 8px 12px;
  border-radius: var(--border-radius-medium);
  color: var(--color-primary);
  font-weight: 700;
}

.legend-dot {
  width: 10px;
  height: 10px;
  display: inline-block;
  border-radius: 50%;
  margin-right: 6px;
  background: var(--color-accent);
}

.legend-dot.upgrading {
  box-shadow: 0 0 10px rgba(224, 176, 96, 0.8);
}

.legend-dot.relation-own { background: #2c7be5; }
.legend-dot.relation-ally { background: #4caf50; }
.legend-dot.relation-nap { background: #1abc9c; }
.legend-dot.relation-truce { background: #6c757d; }
.legend-dot.relation-neutral { background: #d1a23d; }
.legend-dot.relation-enemy { background: #c0392b; }
.legend-dot.relation-barb { background: #7f8c8d; }

.side-panels {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.queue-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.queue-item {
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  padding: 10px;
  background: rgba(255, 255, 255, 0.8);
  box-shadow: var(--box-shadow-default);
}

.item-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}

.item-title {
  font-weight: 800;
  color: var(--color-primary);
}

.item-meta {
  color: #7a6a55;
  font-weight: 700;
}

.item-progress {
  margin-top: 8px;
}

.item-progress .progress-bar {
  width: 100%;
  height: 10px;
  background: rgba(0, 0, 0, 0.08);
  border-radius: 6px;
  overflow: hidden;
  border: 1px solid var(--color-border);
}

.item-progress .progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--color-accent), var(--color-secondary));
  transition: width 0.3s ease;
}

.progress-time {
  text-align: right;
  font-size: 0.9rem;
  color: var(--color-primary);
  margin-top: 4px;
}

.activity-feed {
  min-height: 80px;
  color: var(--color-primary);
}

.chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.buildings-section {
  margin-top: 32px;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.building-item__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 6px;
}

.building-item .stat-line {
  font-weight: 700;
  color: var(--color-primary);
}

.cost-row {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 6px 0;
}

.status-chip {
  display: inline-block;
}

.popup-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 1000;
}

.popup-container {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 1001;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.popup-container .popup-content {
  background: #fffaf0;
  border-radius: var(--border-radius-large);
  border: 2px solid var(--color-primary);
  box-shadow: var(--box-shadow-hover);
  max-width: 720px;
  width: 100%;
  padding: 16px;
  position: relative;
}

.popup-header {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: flex-start;
  margin-bottom: 10px;
}

.popup-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.stat-card {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-medium);
  padding: 10px;
  font-weight: 700;
  color: var(--color-primary);
}

.upgrade-section {
  margin-top: 10px;
  border-top: 1px solid var(--color-border);
  padding-top: 10px;
}

.upgrade-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: center;
}

.text-button {
  background: none;
  border: none;
  color: var(--color-primary);
  font-weight: 700;
  cursor: pointer;
  padding: 4px 8px;
}

.game-message.accent {
  background: rgba(224, 176, 96, 0.18);
  border: 1px solid rgba(224, 176, 96, 0.5);
  border-radius: var(--border-radius-medium);
  padding: 10px;
  margin-top: 8px;
  color: var(--color-primary);
}

@media (max-width: 1100px) {
  .game-grid {
    grid-template-columns: 1fr;
  }
  .village-hero {
    grid-template-columns: 1fr;
  }
}


.village-main-container {
    max-width: 900px;
    margin: 30px auto;
    background: #f7f1e1;
    border-radius: 12px;
    box-shadow: 0 2px 16px #c9b89a;
    padding: 28px 36px 36px 36px;
}
.village-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 18px;
}
.village-header h1 {
    font-size: 2.1em;
    color: #8d5c2c;
    margin: 0;
}
.village-coords {
    font-size: 1.1em;
    color: #bfae8e;
    margin-left: 12px;
}
.village-resources {
    display: flex;
    gap: 24px;
    margin-bottom: 22px;
    background: #e8dcc0;
    border-radius: 8px;
    padding: 12px 18px;
    box-shadow: 0 1px 6px #e0d2b0;
}
.resource-item {
    display: flex;
    align-items: center;
    font-size: 1.1em;
    color: #6b4a1b;
    font-weight: bold;
    gap: 6px;
}
.resource-item img {
    width: 22px;
    height: 22px;
}
.village-buildings-panel {
    margin-bottom: 18px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 1px 8px #e0d2b0;
    padding: 18px 22px;
}
.village-queue-panel {
    background: #f3e7c6;
    border-radius: 8px;
    box-shadow: 0 1px 8px #e0d2b0;
    padding: 14px 20px;
    margin-bottom: 10px;
}
@media (max-width: 700px) {
    .village-main-container { padding: 10px; }
    .village-resources { flex-direction: column; gap: 10px; }
    .village-header h1 { font-size: 1.2em; }
}


#units-section, #research-section {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 1px 8px #e0d2b0;
    padding: 18px 22px;
    margin-bottom: 24px;
}
#units-section h3, #research-section h3 {
    color: var(--color-primary);
    margin-top: 0;
    margin-bottom: 10px;
}
#units-section h4, #research-section h4 {
    color: var(--color-secondary);
    margin-bottom: 8px;
    margin-top: 18px;
}
#current-units-panel, #recruitment-panel, #recruitment-queue-panel, #current-research-panel, #research-queue-panel {
    background: var(--color-background-light);
    border-radius: 6px;
    padding: 10px 14px;
    margin-bottom: 10px;
    box-shadow: 0 1px 4px #e0d2b0;
    min-height: 32px;
}
#recruitment-panel form, #current-research-panel form {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
}
#recruitment-panel input[type="number"] {
    width: 60px;
    padding: 4px;
    border-radius: 4px;
    border: 1px solid var(--color-border);
}
#recruitment-panel button, #current-research-panel button {
    margin-left: 8px;
}
#recruitment-queue-panel .queue-item, #research-queue-panel .queue-item {
    background: #fffaf0;
    border-left: 4px solid var(--color-primary);
    margin-bottom: 6px;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.95em;
}
#recruitment-queue-panel .queue-item:last-child, #research-queue-panel .queue-item:last-child {
    margin-bottom: 0;
}


.loader {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-secondary);
    font-size: 1.1em;
    padding: 12px 0;
    min-height: 32px;
}
.village-notification {
    position: fixed;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 2000;
    min-width: 260px;
    max-width: 90vw;
    background: var(--color-background-light);
    color: var(--color-primary);
    border: 2px solid var(--color-primary);
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.18);
    padding: 14px 28px;
    font-size: 1.05em;
    text-align: center;
    opacity: 0.98;
    display: none;
    transition: opacity 0.3s;
}
.village-notification.success {
    border-color: var(--color-success);
    color: var(--color-success);
    background: var(--color-success-bg);
}
.village-notification.error {
    border-color: var(--color-error);
    color: var(--color-error);
    background: var(--color-error-bg);
}
.village-notification.info {
    border-color: var(--color-info);
    color: var(--color-info);
    background: var(--color-info-bg);
}


.game-toast {
    position: fixed;
    top: 30px;
    right: 30px;
    min-width: 260px;
    max-width: 90vw;
    background: var(--color-background-light);
    color: var(--color-primary);
    border: 2px solid var(--color-primary);
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.18);
    padding: 14px 28px;
    font-size: 1.05em;
    text-align: center;
    opacity: 0;
    z-index: 3000;
    pointer-events: none;
    transition: opacity 0.4s, transform 0.4s;
    transform: translateY(-30px);
}
.game-toast.visible {
    opacity: 0.98;
    transform: translateY(0);
}
.game-toast.success {
    background: var(--color-success-bg);
    color: var(--color-success);
    border-color: var(--color-success);
}
.game-toast.error {
    background: var(--color-error-bg);
    color: var(--color-error);
    border-color: var(--color-error);
}
.game-toast.info {
    background: var(--color-info-bg);
    color: var(--color-info);
    border-color: var(--color-info);
}


.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0,0,0,0.7), rgba(0,0,0,0.4));
    z-index: 1;
}

.hero-content {
    position: relative;
    z-index: 2;
    max-width: 800px;
    text-align: center;
    color: #fff;
    padding: var(--spacing-lg);
    animation: fadeIn 1.5s ease-out;
}

.hero h2 {
    font-size: var(--font-size-xlarge);
    margin-bottom: var(--spacing-sm);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.hero p {
    font-size: var(--font-size-large);
    margin-bottom: var(--spacing-lg);
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
}

.hero-buttons a.btn {
    margin: 0 var(--spacing-sm);
}

.stats-bar {
    display: flex;
    justify-content: space-around;
    background: linear-gradient(to right, var(--color-secondary), var(--color-primary));
    padding: var(--spacing-lg) var(--spacing-xl); 
    color: white;
    text-align: center;
    margin-bottom: var(--spacing-xl);
    box-shadow: var(--box-shadow-default);
    border-top: 1px solid var(--color-background-dark);
    border-bottom: 1px solid var(--color-background-dark);
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: var(--spacing-sm); 
}

.stat-number {
    font-size: 2.8rem; 
    font-weight: bold;
    margin-bottom: var(--spacing-xs);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.4); 
    color: var(--color-accent);
}

.stat-label {
    font-size: 1.1rem; 
    opacity: 0.9;
    text-transform: uppercase;
    letter-spacing: 1px; 
    font-weight: bold;
}

@media (max-width: 600px) {
    .stats-bar {
        flex-direction: column;
        gap: var(--spacing-md); 
    }
}

.game-description {
    background-color: var(--color-background-medium);
    padding: var(--spacing-xl) var(--spacing-lg); 
    margin-top: 0;
    border-top: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
}

.description-container {
    max-width: 900px;
    margin: 0 auto;
    background-color: var(--color-background-light);
    padding: var(--spacing-xl); 
    border-radius: var(--border-radius-medium);
    box-shadow: var(--box-shadow-default);
}

.description-container h2 {
    color: var(--color-primary);
    margin-bottom: var(--spacing-lg); 
    text-align: center;
    font-size: var(--font-size-xlarge);
}

.description-container p {
    margin-bottom: var(--spacing-lg); 
    line-height: 1.8; 
    font-size: var(--font-size-normal);
    color: #444;
}

.feature-list {
    margin-left: var(--spacing-lg); 
    margin-bottom: var(--spacing-xl); 
    list-style: disc; 
    color: #555;
}

.feature-list li {
    margin-bottom: var(--spacing-sm); 
    font-size: var(--font-size-normal);
}

.feature-list li strong {
    color: var(--color-primary);
}

.cta-box {
    background-color: var(--color-background-dark);
    padding: var(--spacing-xl); 
    border-radius: var(--border-radius-medium); 
    text-align: center;
    margin-top: var(--spacing-xl); 
    box-shadow: var(--box-shadow-inset);
}

.cta-box h3 {
    margin-bottom: var(--spacing-md); 
    color: var(--color-primary);
    font-size: var(--font-size-large);
}

.cta-box .btn {
    margin-top: var(--spacing-md); 
    padding: var(--spacing-md) var(--spacing-xl);
    font-size: 1.1rem;
}

.site-footer {
    background-color: var(--color-primary);
    color: var(--color-text-light);
    padding: var(--spacing-xl) var(--spacing-lg) var(--spacing-md); 
    margin-top: var(--spacing-xl); 
    box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
}

.footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
    gap: var(--spacing-lg); 
}

.footer-logo,
.footer-links,
.footer-info {
    flex: 1;
    min-width: 280px; 
    margin-bottom: var(--spacing-xl); 
    padding: 0 var(--spacing-md);
}

.footer-logo h3 {
    font-size: var(--font-size-large); 
    margin-bottom: var(--spacing-sm);
    color: var(--color-accent); 
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

.footer-logo p {
    font-size: var(--font-size-normal);
    color: var(--color-background-medium);
}

.footer-links h4,
.footer-info h4 {
    color: var(--color-background-medium);
    margin-bottom: var(--spacing-md); 
    font-size: var(--font-size-medium);
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: var(--spacing-xs);
}

.footer-links ul {
    list-style: none;
    padding: 0;
}

.footer-links li {
    margin-bottom: var(--spacing-xs);
}

.footer-links a {
    color: var(--color-text-light);
    text-decoration: none;
    transition: color var(--transition-fast);
    font-size: var(--font-size-normal);
}

.footer-links a:hover {
    color: var(--color-accent); 
    text-decoration: underline;
}

.footer-info p {
    font-size: var(--font-size-normal);
    color: var(--color-background-medium);
    line-height: 1.6;
}

.footer-bottom {
    border-top: 1px solid rgba(255,255,255,0.15); 
    padding-top: var(--spacing-md); 
    margin-top: var(--spacing-md); 
    text-align: center;
    font-size: var(--font-size-small);
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
    color: var(--color-background-medium);
}

@media (max-width: 768px) {
    .stats-bar {
        flex-direction: column;
        gap: var(--spacing-md);
    }
    
    .footer-content {
        flex-direction: column;
    }
    
    .footer-logo,
    .footer-links,
    .footer-info {
        width: 100%;
        text-align: center;
    }
    
    .footer-links ul {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: var(--spacing-sm);
    }
    
    .footer-links li {
        margin: 0;
    }
}



.notifications-icon {
    position: relative;
    display: inline-block;
    margin-left: 15px;
}

.notifications-icon a {
    display: flex;
    align-items: center;
    color: var(--color-text-light);
    text-decoration: none;
    padding: 0 10px;
}

.notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--color-error); 
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    font-size: 11px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.dropdown-content {
    display: none;
    position: absolute;
    right: 0;
    background-color: var(--color-background-light); 
    min-width: 350px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1000;
    border-radius: var(--border-radius-small);
    border: 1px solid var(--color-primary); 
    max-height: 400px;
    overflow-y: auto;
}

.dropdown-content h3 {
    margin: 0;
    padding: 12px 15px;
    background-color: var(--color-primary); 
    color: var(--color-text-light); 
    font-size: 16px;
    border-bottom: 1px solid var(--color-primary); 
}

.notifications-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.notification-item {
    display: flex;
    padding: 12px 15px;
    border-bottom: 1px solid var(--color-border); 
    transition: background-color 0.2s;
    align-items: flex-start;
}

.notification-item:hover {
    background-color: var(--color-background-medium); 
}

.notification-icon {
    margin-right: 12px;
    font-size: 18px;
    color: var(--color-primary); 
    padding-top: 2px;
}

.notification-content {
    flex: 1;
}

.notification-message {
    margin-bottom: 5px;
    font-size: 14px;
    line-height: 1.4;
}

.notification-time {
    font-size: 12px;
    color: #777;
}

.notification-success .notification-icon {
    color: var(--color-success); 
}

.notification-error .notification-icon {
    color: var(--color-error); 
}


#popup-action-content h3, #popup-action-content h4 {
    color: var(--color-primary-dark);
    margin-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-xs);
}

#popup-action-content .queue-content, #popup-action-content .recruit-form {
    margin-top: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm);
    background-color: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
}

#popup-action-content .recruitment-queue,
#popup-action-content .recruitment-units {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--spacing-sm);
}

#popup-action-content .recruitment-queue th,
#popup-action-content .recruitment-units th,
#popup-action-content .recruitment-queue td,
#popup-action-content .recruitment-units td {
    border: 1px solid var(--color-border);
    padding: var(--spacing-xs);
    text-align: left;
}

#popup-action-content .recruitment-units img {
    vertical-align: middle;
    margin-right: 5px;
}

#popup-action-content .recruitment-units .recruit-count {
    width: 60px;
    padding: var(--spacing-xs);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    margin-right: var(--spacing-xs);
}

#popup-action-content .recruitment-units .recruit-button {
    
}

#popup-action-content .recruitment-units tr.unavailable td {
    color: #777;
    font-style: italic;
}

#popup-action-content .recruitment-units tr.unavailable button {
    opacity: 0.6;
}

#popup-action-content .recruitment-timer {
    font-weight: bold;
    color: var(--color-primary);
}

#popup-action-content .recruitment-timer.timer-finished {
    color: var(--color-success);
    font-weight: normal;
}

#popup-action-content .cancel-recruitment-button {
    background-color: var(--color-danger);
    color: white;
    border: none;
    border-radius: var(--border-radius-small);
    cursor: pointer;
    padding: 3px 6px;
    font-size: 0.8em;
}

#popup-action-content .cancel-recruitment-button:hover {
    background-color: var(--color-danger-dark);
}

#popup-action-content .owned-units {
    font-weight: bold;
}


#popup-action-content .research-queue,
#popup-action-content .research-options {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--spacing-sm);
}

#popup-action-content .research-queue th,
#popup-action-content .research-options th,
#popup-action-content .research-queue td,
#popup-action-content .research-options td {
    border: 1px solid var(--color-border);
    padding: var(--spacing-xs);
    text-align: left;
}

#popup-action-content .research-options img {
    vertical-align: middle;
    margin-right: 5px;
}

#popup-action-content .research-options tr.unavailable td {
    color: #777;
    font-style: italic;
}

#popup-action-content .research-options tr.unavailable button {
    opacity: 0.6;
}

#popup-action-content .research-timer {
    font-weight: bold;
    color: var(--color-primary);
}

#popup-action-content .research-timer.timer-finished {
    color: var(--color-success);
    font-weight: normal;
}

#popup-action-content .cancel-research-button {
    background-color: var(--color-danger);
    color: white;
    border: none;
    border-radius: var(--border-radius-small);
    cursor: pointer;
    padding: 3px 6px;
    font-size: 0.8em;
}

#popup-action-content .cancel-research-button:hover {
    background-color: var(--color-danger-dark);
}


#popup-action-content .market-info {
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm);
    background-color: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
}

#popup-action-content .market-panel {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

#popup-action-content .market-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--spacing-md);
}

#popup-action-content .market-card,
#popup-action-content .market-subsection {
    background-color: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    padding: var(--spacing-sm);
}

#popup-action-content .market-card h4,
#popup-action-content .market-subsection h4 {
    margin-top: 0;
}

#popup-action-content .offers-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--spacing-xs);
}

#popup-action-content .offers-table th,
#popup-action-content .offers-table td {
    border: 1px solid var(--color-border);
    padding: var(--spacing-xs);
}

#popup-action-content .helper-text {
    font-size: var(--font-size-small);
    color: var(--color-muted);
}

#popup-action-content .muted {
    color: var(--color-muted);
}

#popup-action-content .market-warning {
    padding: var(--spacing-sm);
    border: 1px dashed var(--color-border);
    border-radius: var(--border-radius-small);
    background-color: var(--color-background-alt);
}

#popup-action-content .send-resources h4,
#popup-action-content .active-trades h4,
#popup-action-content .market-offers h4 {
    margin-bottom: var(--spacing-sm);
    border-bottom: 1px dashed var(--color-border);
    padding-bottom: var(--spacing-xs);
}

#popup-action-content #send-resources-form {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-sm);
    background-color: var(--color-background-alt);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
}

#popup-action-content #send-resources-form .form-group,
#popup-action-content #send-resources-form .resource-inputs {
    display: contents; 
}

#popup-action-content #send-resources-form label {
     display: block;
    margin-bottom: var(--spacing-xs);
    font-weight: bold;
}

#popup-action-content #send-resources-form input[type="text"],
#popup-action-content #send-resources-form input[type="number"] {
    width: 100%;
    padding: var(--spacing-xs);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    box-sizing: border-box; 
}

#popup-action-content #send-resources-form .resource-inputs {
    display: grid;
    grid-template-columns: repeat(3, 1fr); 
    gap: var(--spacing-sm);
}

#popup-action-content #send-resources-form .resource-input img {
    vertical-align: middle;
    margin-right: 5px;
}

#popup-action-content #send-resources-form .current-resources {
    margin-top: var(--spacing-sm);
    font-size: var(--font-size-small);
    color: #555;
}

#popup-action-content #send-resources-form .form-actions {
    margin-top: var(--spacing-md);
    text-align: right;
}

#popup-action-content .active-trades table.trades-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--spacing-sm);
}

#popup-action-content .active-trades table.trades-table th,
#popup-action-content .active-trades table.trades-table td {
    border: 1px solid var(--color-border);
    padding: var(--spacing-xs);
    text-align: left;
}

#popup-action-content .trade-timer {
     font-weight: bold;
     color: var(--color-primary);
}

#popup-action-content .trade-timer.timer-finished {
     color: var(--color-success);
     font-weight: normal;
}


.pagination {
    margin-top: var(--spacing-md);
    text-align: center;
}

.pagination .page-link {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-sm);
    margin: 0 var(--spacing-xs);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    color: var(--color-primary);
    text-decoration: none;
    transition: background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
}

.pagination .page-link:hover {
    background-color: var(--color-background-medium);
    color: var(--color-primary-dark);
}

.pagination .page-link.active {
    background-color: var(--color-primary);
    color: var(--color-text-light);
    border-color: var(--color-primary);
    font-weight: bold;
}




.reports-tabs {
     margin-bottom: var(--spacing-md);
     border-bottom: 2px solid var(--color-border);
     display: flex; 
     overflow-x: auto; 
     padding-bottom: 5px; 
}

.reports-tabs .tab {
     display: block; 
     padding: var(--spacing-sm) var(--spacing-md);
     margin-right: var(--spacing-sm); 
     background-color: var(--color-background-medium);
     color: var(--color-text-dark);
     border: 1px solid var(--color-border);
     border-bottom: none; 
     border-top-left-radius: var(--border-radius-small);
     border-top-right-radius: var(--border-radius-small);
     transition: background-color var(--transition-fast), color var(--transition-fast);
     white-space: nowrap; 
}

.reports-tabs .tab:hover {
     background-color: var(--color-background-dark);
     color: var(--color-primary);
}

.reports-tabs .tab.active {
     background-color: var(--color-background-light); 
     color: var(--color-primary);
     border-color: var(--color-border);
     border-bottom-color: var(--color-background-light); 
     position: relative; 
     z-index: 1; 
     font-weight: bold;
}


.reports-container {
    display: flex;
    gap: var(--spacing-md); 
    flex-wrap: wrap; 
}

.reports-list {
    flex: 1; 
    min-width: 300px; 
    max-width: 100%; 
    
      
     
}

.report-item {
    background-color: var(--color-background-medium);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    padding: var(--spacing-sm) var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    cursor: pointer;
    transition: background-color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
    box-shadow: var(--box-shadow-default);
}

.report-item:hover {
    background-color: var(--color-background-dark);
    border-color: var(--color-primary);
}

.report-item.unread {
    background-color: #fff8e1; 
    border-color: var(--color-accent);
    font-weight: bold;
}

.report-item.unread:hover {
     background-color: #ffecb3; 
}

.report-title {
    font-weight: bold;
    margin-bottom: var(--spacing-xs);
    color: var(--color-primary);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}

.report-icon {
     margin-right: var(--spacing-sm);
     font-size: 1.2em; 
     
}

.report-villages {
     font-size: var(--font-size-small);
     color: var(--color-text-dark);
     margin-bottom: var(--spacing-xs);
}

.report-date {
    font-size: var(--font-size-small);
    color: #666;
    text-align: right; 
}

.report-name {
    flex: 1;
}

.report-item.starred {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 1px rgba(141, 92, 44, 0.1);
}

.report-star {
    margin-left: auto;
    background: none;
    border: 1px solid transparent;
    color: var(--color-text-dark);
    cursor: pointer;
    padding: 2px 8px;
    border-radius: 6px;
    line-height: 1.2;
    transition: color var(--transition-fast), background-color var(--transition-fast), border-color var(--transition-fast);
}

.report-star:hover {
    color: var(--color-primary);
    border-color: var(--color-border);
    background-color: var(--color-background-dark);
}

.report-star.active {
    color: var(--color-primary);
    border-color: var(--color-primary);
    background-color: #f7e7cf;
}

.offline-badge {
    display: none;
    align-items: center;
    gap: 8px;
    background: #fff4e5;
    border: 1px solid #f2c38b;
    color: #8d5c2c;
    padding: 10px 12px;
    border-radius: 8px;
    margin: 12px 0;
    font-size: 14px;
}

.offline-badge.visible {
    display: flex;
}

.offline-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #d1431f;
    box-shadow: 0 0 0 4px rgba(209, 67, 31, 0.15);
}

.report-details {
    flex: 2; 
    min-width: 400px; 
    max-width: 100%; 
    background-color: var(--color-background-light);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-md);
    box-shadow: var(--box-shadow-default);
}

.report-details h3 {
     color: var(--color-primary);
     margin-top: 0;
     margin-bottom: var(--spacing-md);
     border-bottom: 1px solid var(--color-border);
     padding-bottom: var(--spacing-sm);
}

.report-details .battle-summary {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap; 
}

.battle-side {
    flex: 1;
    min-width: 250px; 
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    background-color: var(--color-background-medium);
}

.battle-side h4 {
     color: var(--color-primary);
     margin-top: 0;
     margin-bottom: var(--spacing-sm);
}

.battle-side .battle-village {
     font-size: var(--font-size-normal);
     margin-bottom: var(--spacing-sm);
}

.battle-side .battle-strength {
     font-weight: bold;
     color: var(--color-accent-dark);
     margin-bottom: var(--spacing-sm);
}

.battle-side.winner {
     border-color: var(--color-success);
     background-color: var(--color-success-bg);
}

.battle-side.loser {
     border-color: var(--color-error);
     background-color: var(--color-error-bg);
}

.battle-loot {
     width: 100%; 
     margin-top: var(--spacing-md);
     padding: var(--spacing-md);
     border: 1px solid var(--color-border);
     border-radius: var(--border-radius-small);
     background-color: var(--color-background-medium);
}

.battle-loot h4 {
     color: var(--color-primary);
     margin-top: 0;
     margin-bottom: var(--spacing-sm);
}

.battle-loot p {
     font-weight: bold;
}


.report-details .units-table {
     width: 100%;
     border-collapse: collapse; 
     margin-top: var(--spacing-sm);
}

.report-details .units-table th,
.report-details .units-table td {
     border: 1px solid var(--color-border);
     padding: var(--spacing-sm);
     text-align: left;
}

.report-details .units-table th {
     background-color: var(--color-primary);
     color: var(--color-text-light);
     font-weight: bold;
}

.report-details .units-table td.unit-name {
     display: flex;
     align-items: center;
}

.report-details .units-table td.unit-name img {
     margin-right: var(--spacing-xs);
     width: 20px; 
     height: 20px;
}

.report-details .units-table td.unit-lost {
     color: var(--color-error); 
     font-weight: bold;
}


@media (max-width: 768px) {
     .reports-container {
         flex-direction: column; 
     }
     
     .reports-list,
     .report-details {
         flex: none; 
         width: 100%; 
         min-width: auto; 
     }

      .battle-summary {
          flex-direction: column; 
          gap: var(--spacing-sm);
      }
      
      .battle-side {
          min-width: auto; 
      }
}


p.no-reports {
     font-style: italic;
     color: #666;
     text-align: center;
     margin-top: var(--spacing-md);
}


.messages-tabs {
    display: flex;
    margin-bottom: var(--spacing-md);
    border-bottom: 2px solid var(--color-border);
    overflow-x: auto;
    padding-bottom: 5px;
}

.messages-tabs .tab {
    display: block;
    padding: var(--spacing-sm) var(--spacing-md);
    margin-right: var(--spacing-sm);
    background-color: var(--color-background-medium);
    color: var(--color-text-dark);
    border: 1px solid var(--color-border);
    border-bottom: none;
    border-top-left-radius: var(--border-radius-small);
    border-top-right-radius: var(--border-radius-small);
    transition: background-color var(--transition-fast), color var(--transition-fast);
    white-space: nowrap;
    font-weight: bold; 
}

.messages-tabs .tab:hover {
     background-color: var(--color-background-dark);
     color: var(--color-primary);
}

.messages-tabs .tab.active {
     background-color: var(--color-background-light);
     color: var(--color-primary);
     border-color: var(--color-border);
     border-bottom-color: var(--color-background-light);
     position: relative;
     z-index: 1;
}

.badge {
    background-color: var(--color-accent);
    color: var(--color-primary);
    border-radius: var(--border-radius-small); 
    padding: 2px 8px; 
    font-size: var(--font-size-small);
    margin-left: var(--spacing-xs);
    font-weight: bold;
}


.messages-tabs .tab.active .badge {
     background-color: var(--color-primary);
     color: var(--color-text-light);
}

.messages-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
    flex-wrap: wrap; 
    gap: var(--spacing-sm); 
}

.bulk-actions {
    display: flex;
    gap: var(--spacing-sm);
    align-items: center;
    flex-wrap: wrap; 
}

.bulk-actions select, .bulk-actions button {
     
}

.messages-container {
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap; 
}

.messages-list {
    flex: 1; 
    min-width: 300px; 
    max-width: 100%; 
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm); 
}

.message-item {
    display: flex;
    align-items: center; 
    background-color: var(--color-background-medium);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
    padding: var(--spacing-sm) var(--spacing-md);
    cursor: pointer;
    transition: background-color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
    box-shadow: var(--box-shadow-default);
}

.message-item:hover {
    background-color: var(--color-background-dark);
    border-color: var(--color-primary);
}

.message-item.unread {
    background-color: #fff8e1; 
    border-color: var(--color-accent);
    font-weight: bold;
}

.message-item.unread:hover {
     background-color: #ffecb3; 
}

.message-checkbox,
.message-status {
    flex-shrink: 0; 
    width: 30px; 
    text-align: center;
}

.message-checkbox-input {
     margin: 0; 
}

.message-sender,
.message-date {
    flex-shrink: 0; 
    width: 150px; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    white-space: nowrap; 
    
}

.message-subject {
    flex-grow: 1; 
    overflow: hidden; 
    text-overflow: ellipsis; 
    white-space: nowrap; 
    margin: 0 var(--spacing-sm); 
}

.message-subject a {
    color: inherit; 
    text-decoration: none; 
}

.message-subject a:hover {
    text-decoration: underline; 
}

.message-actions {
    flex-shrink: 0;
    width: 100px; 
    text-align: right;
}

.message-actions .action-btn {
     
     background: none; 
     border: none; 
     padding: 0 var(--spacing-xs); 
     color: var(--color-primary); 
     cursor: pointer;
     transition: color var(--transition-fast);
     box-shadow: none;
     display: inline-block; 
     text-transform: none;
     letter-spacing: normal;
     font-weight: normal;
}

.message-actions .action-btn:hover {
     color: var(--color-accent);
     transform: none; 
     box-shadow: none; 
}

.message-actions .action-btn:active {
     transform: none; 
     box-shadow: none; 
}

.delete-message-btn {
     color: var(--color-error); 
}

.message-details {
    flex: 2; 
    min-width: 400px; 
    max-width: 100%; 
    background-color: var(--color-background-light);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-md);
    box-shadow: var(--box-shadow-default);
}

.message-details h3 {
    color: var(--color-primary);
    margin-top: 0;
    margin-bottom: var(--spacing-sm);
}

.message-details .message-meta {
    font-size: var(--font-size-small);
    color: #666;
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--spacing-sm);
}

.message-details .message-body {
    line-height: 1.8; 
    white-space: pre-wrap; 
    word-wrap: break-word; 
}

.message-details .message-actions {
    margin-top: var(--spacing-md);
    text-align: left; 
}


.no-messages {
     text-align: center;
     padding: var(--spacing-lg);
     font-style: italic;
     color: #666;
}


@media (max-width: 768px) {
    .messages-container {
        flex-direction: column; 
        gap: var(--spacing-sm);
    }

    .messages-list,
    .message-details {
        flex: none;
        width: 100%;
        min-width: auto;
    }

    .message-item {
        flex-wrap: wrap;
        padding: var(--spacing-sm);
        justify-content: space-between; 
    }

    .message-checkbox,
    .message-status {
        width: auto;
        margin-right: var(--spacing-sm);
    }
    
    .message-sender,
    .message-subject {
         width: 100%;
         margin: 0 0 var(--spacing-xs) 0;
         white-space: normal;
         text-overflow: clip;
         order: -1; 
    }

    .message-date {
        width: 100%;
        margin: 0 0 var(--spacing-xs) 0; 
        text-align: left;
        font-size: var(--font-size-small);
        color: #999;
         order: 0; 
    }

    .message-actions {
        width: 100%;
        text-align: left;
        margin-top: var(--spacing-sm);
         order: 1; 
    }

     .messages-toolbar {
         flex-direction: column; 
         gap: var(--spacing-md);
         align-items: flex-start;
     }
     
     .bulk-actions {
         width: 100%;
     }
     
     .bulk-actions select, .bulk-actions button {
         width: auto; 
     }
}




.player-profile {
    max-width: 600px;
    margin: 40px auto;
    background: var(--beige-light);
    border: 2px solid var(--brown-primary);
    border-radius: var(--border-radius-medium);
    box-shadow: var(--box-shadow-medium);
    padding: var(--spacing-xl);
}

.player-profile h2 {
    color: var(--brown-dark);
    margin-top: 0;
}

.player-profile .summary-box {
     background: var(--beige-dark);
     border: 1px solid var(--beige-darker);
     border-radius: var(--border-radius-small);
     padding: var(--spacing-md) var(--spacing-lg);
     margin-bottom: var(--spacing-lg);
}

.player-profile .villages-list {
    margin-top: var(--spacing-lg);
}

.player-profile .villages-list table {
    width: 100%;
    border-collapse: collapse;
}

.player-profile .villages-list th,
.player-profile .villages-list td {
    border: 1px solid var(--beige-darker);
    padding: var(--spacing-xs) var(--spacing-sm);
    text-align: left;
}

.player-profile .villages-list th {
    background: var(--beige-darker);
    color: var(--brown-dark);
}

.player-profile .villages-list td {
    background: var(--beige-light);
}

.player-profile .villages-list td a.btn {
     padding: 4px 10px; 
     font-size: 0.95em; 
     margin: 0;
}

.player-profile .no-villages {
    margin-top: var(--spacing-md);
    font-style: italic;
    color: var(--brown-dark);
}

.player-profile .plaques-section {
    margin-top: var(--spacing-lg);
    background: #fff;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-md);
    box-shadow: var(--box-shadow-default);
}

.player-profile .plaques-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
}

.player-profile .plaque-card {
    background: linear-gradient(135deg, #f8f1df, #f2e1c0);
    border: 1px solid #c7a669;
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-sm);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
}

.player-profile .plaque-head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.85rem;
    color: #6b4a1b;
    margin-bottom: 4px;
}

.player-profile .plaque-card h4 {
    margin: 2px 0 4px;
    color: #5a3a2b;
    font-size: 1rem;
}

.player-profile .plaque-desc {
    margin: 0;
    color: #4a3317;
    font-size: 0.9rem;
}

.player-profile .no-plaques,
.player-profile .more-plaques {
    color: #6b4a1b;
    margin-top: var(--spacing-sm);
}


#main-content main {
    padding: var(--spacing-xl);
}


.player-profile .back-to-ranking-btn {
    margin-top: var(--spacing-lg);
    
}


#main-header {
    
}

#main-header .header-title .game-logo {
     
}

#main-header .header-user {
     
}

/* Map page */
.map-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
    background: linear-gradient(160deg, rgba(246, 240, 230, 0.9), rgba(201, 177, 137, 0.9));
    padding: var(--spacing-lg);
    border: 1px solid var(--beige-darker);
    border-radius: var(--border-radius-medium);
    box-shadow: var(--box-shadow-hover);
    position: relative;
    isolation: isolate;
}

.map-controls {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    justify-content: space-between;
    background: rgba(255, 255, 255, 0.35);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-small);
    border: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.map-controls button {
    padding: 6px 12px;
    background: linear-gradient(to bottom, var(--brown-secondary), var(--brown-primary));
    color: var(--color-text-light);
    border: 1px solid rgba(0, 0, 0, 0.15);
    border-radius: var(--border-radius-small);
    box-shadow: var(--box-shadow-default);
    font-weight: 600;
}

.map-controls button:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
}

.map-grid {
    display: grid;
    gap: 2px;
    --map-tile-size: 32px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25), transparent 45%), var(--beige-medium);
    padding: 8px;
    border: 1px solid var(--beige-dark);
    border-radius: var(--border-radius-medium);
    max-width: 100%;
    overflow: auto;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.08);
}

.map-grid-shell {
    position: relative;
}

.map-high-contrast .map-grid-shell {
    background: #0b1020;
    border-color: #111827;
}

.map-high-contrast .map-grid-shell {
    background: #0b1020;
    border-color: #111827;
}

.map-skeleton {
    position: absolute;
    inset: 0;
    display: none;
    padding: 12px;
    pointer-events: none;
    background: linear-gradient(90deg, rgba(245,240,230,0.85), rgba(240,234,222,0.9));
    z-index: 2;
}
.map-skeleton .skeleton-row {
    height: 16px;
    background: linear-gradient(90deg, rgba(230,221,203,0.9) 25%, rgba(248,243,234,0.9) 50%, rgba(230,221,203,0.9) 75%);
    background-size: 200% 100%;
    border-radius: 8px;
    margin-bottom: 10px;
    animation: skeleton-shimmer 1.2s ease-in-out infinite;
}
.map-skeleton .skeleton-row:last-child {
    margin-bottom: 0;
}

.map-loading {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    gap: 10px;
    background: rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(2px);
    border-radius: var(--border-radius-medium);
    color: #4a3c2f;
    font-weight: 600;
    pointer-events: none;
}

.map-loading .spinner {
    width: 18px;
    height: 18px;
    border: 3px solid rgba(74, 60, 47, 0.2);
    border-top-color: #4a3c2f;
    border-radius: 50%;
    animation: spin 0.9s linear infinite;
}

.map-grid.is-loading {
    filter: blur(1px);
    opacity: 0.8;
}

body.map-high-contrast #map-grid {
    background: #0f172a;
}
body.map-high-contrast .map-tile {
    background: #111827;
    border-color: #1f2937;
}
body.map-high-contrast .map-tile .coords {
    background: rgba(15, 23, 42, 0.85);
    color: #e5e7eb;
}
.map-high-contrast .legend-dot.relation-own { background: #6366f1; }
.map-high-contrast .legend-dot.relation-ally { background: #22c55e; }
.map-high-contrast .legend-dot.relation-nap { background: #06b6d4; }
.map-high-contrast .legend-dot.relation-truce { background: #eab308; }
.map-high-contrast .legend-dot.relation-enemy { background: #ef4444; }
.map-high-contrast .legend-dot.relation-neutral { background: #cbd5e1; }
.map-high-contrast .legend-dot.relation-barb { background: #94a3b8; }
.map-high-contrast .relation-own { border-color: #6366f1; box-shadow: 0 0 0 1px rgba(99,102,241,0.4); }
.map-high-contrast .relation-ally { border-color: #22c55e; box-shadow: 0 0 0 1px rgba(34,197,94,0.4); }
.map-high-contrast .relation-nap { border-color: #06b6d4; box-shadow: 0 0 0 1px rgba(6,182,212,0.4); }
.map-high-contrast .relation-truce { border-color: #eab308; box-shadow: 0 0 0 1px rgba(234,179,8,0.35); }
.map-high-contrast .relation-enemy { border-color: #ef4444; box-shadow: 0 0 0 1px rgba(239,68,68,0.4); }
.map-high-contrast .relation-neutral { border-color: #cbd5e1; box-shadow: 0 0 0 1px rgba(203,213,225,0.35); }
.map-high-contrast .relation-barb { border-color: #94a3b8; box-shadow: 0 0 0 1px rgba(148,163,184,0.3); }

/* Reduced motion toggle */
body.map-reduced-motion * {
    animation-duration: 0s !important;
    animation-iteration-count: 1 !important;
    transition: none !important;
}
body.map-reduced-motion .map-tile:hover {
    transform: none !important;
    box-shadow: none !important;
}
body.map-reduced-motion #map-loading {
    backdrop-filter: none;
}
body.map-reduced-motion .map-skeleton .skeleton-row {
    animation: none;
    background-position: 0 0;
}

.activity-pill {
    display: inline-block;
    margin-left: 6px;
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 11px;
    background: rgba(85, 104, 63, 0.15);
    color: #55683f;
}

.activity-1h .activity-pill,
.activity-6h .activity-pill {
    background: rgba(93, 185, 93, 0.2);
    color: #2f6b2f;
}

.activity-24h .activity-pill {
    background: rgba(255, 193, 79, 0.25);
    color: #a06216;
}

.activity-72h .activity-pill {
    background: rgba(255, 170, 59, 0.2);
    color: #9a5c1a;
}

.activity-stale .activity-pill,
.activity-unknown .activity-pill {
    background: rgba(180, 180, 180, 0.2);
    color: #555;
}

.map-high-contrast #map-grid {
    background: #0f172a;
}
.map-high-contrast .map-tile {
    background: #111827;
    border-color: #1f2937;
}
.map-high-contrast .map-tile .coords {
    background: rgba(15, 23, 42, 0.85);
    color: #e5e7eb;
}
.map-high-contrast .legend-dot.relation-own { background: #6366f1; }
.map-high-contrast .legend-dot.relation-ally { background: #22c55e; }
.map-high-contrast .legend-dot.relation-nap { background: #06b6d4; }
.map-high-contrast .legend-dot.relation-truce { background: #eab308; }
.map-high-contrast .legend-dot.relation-enemy { background: #ef4444; }
.map-high-contrast .legend-dot.relation-neutral { background: #cbd5e1; }
.map-high-contrast .legend-dot.relation-barb { background: #94a3b8; }
.map-high-contrast .relation-own { border-color: #6366f1; box-shadow: 0 0 0 1px rgba(99,102,241,0.4); }
.map-high-contrast .relation-ally { border-color: #22c55e; box-shadow: 0 0 0 1px rgba(34,197,94,0.4); }
.map-high-contrast .relation-nap { border-color: #06b6d4; box-shadow: 0 0 0 1px rgba(6,182,212,0.4); }
.map-high-contrast .relation-truce { border-color: #eab308; box-shadow: 0 0 0 1px rgba(234,179,8,0.35); }
.map-high-contrast .relation-enemy { border-color: #ef4444; box-shadow: 0 0 0 1px rgba(239,68,68,0.4); }
.map-high-contrast .relation-neutral { border-color: #cbd5e1; box-shadow: 0 0 0 1px rgba(203,213,225,0.35); }
.map-high-contrast .relation-barb { border-color: #94a3b8; box-shadow: 0 0 0 1px rgba(148,163,184,0.3); }

body.map-loading #map-skeleton {
    display: block;
}

@keyframes skeleton-shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.map-tile {
    position: relative;
    width: var(--map-tile-size);
    height: var(--map-tile-size);
    background: linear-gradient(135deg, rgba(255,255,255,0.35), rgba(0,0,0,0.02)), #e8dfd0;
    border: 1px solid #d2c2aa;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast);
}

.map-tile:hover {
    transform: translateY(-1px);
    box-shadow: var(--box-shadow-hover);
    border-color: var(--color-accent);
}

.map-tile img {
    width: 32px;
    height: 32px;
    object-fit: cover;
}

.map-tile .coords {
    position: absolute;
    bottom: 2px;
    right: 2px;
    font-size: 10px;
    color: #555;
    background: rgba(255,255,255,0.8);
    padding: 1px 3px;
    border-radius: 2px;
}

.map-tile.own-village {
    border-color: #2c7be5;
}

.map-tile.player {
    border-color: #8d5c2c;
}

.map-tile.barbarian {
    border-color: #7f8c8d;
}

.map-tile .village-meta {
    position: absolute;
    bottom: 16px;
    left: 3px;
    right: 3px;
    font-size: 10px;
    color: #2f2f2f;
    background: rgba(255,255,255,0.75);
    border-radius: 3px;
    padding: 1px 3px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
}

.relation-own { border-color: #2c7be5; box-shadow: 0 0 0 1px rgba(44,123,229,0.4); }
.relation-ally { border-color: #4caf50; box-shadow: 0 0 0 1px rgba(76,175,80,0.4); }
.relation-nap { border-color: #1abc9c; box-shadow: 0 0 0 1px rgba(26,188,156,0.35); }
.relation-truce { border-color: #6c757d; box-shadow: 0 0 0 1px rgba(108,117,125,0.35); }
.relation-neutral { border-color: #d1a23d; box-shadow: 0 0 0 1px rgba(209,162,61,0.35); }
.relation-enemy { border-color: #c0392b; box-shadow: 0 0 0 1px rgba(192,57,43,0.35); }
.relation-barb { border-color: #7f8c8d; box-shadow: 0 0 0 1px rgba(127,140,141,0.3); }

.mini-map-card {
    width: 200px;
    border: 1px solid var(--beige-dark);
    border-radius: var(--border-radius-medium);
    background: #f7f2e9;
    padding: var(--spacing-sm);
    box-shadow: var(--box-shadow);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.mini-map-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 700;
}

#mini-map {
    border: 1px solid var(--beige-dark);
    background: #fdfbf6;
    border-radius: 6px;
}

.mini-map-legend {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
    font-size: 11px;
    align-items: center;
}

.mini-map-legend .legend {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    margin-right: 4px;
}
.mini-map-legend .legend.own { background: #2c7be5; }
.mini-map-legend .legend.ally { background: #4caf50; }
.mini-map-legend .legend.enemy { background: #c0392b; }
.mini-map-legend .legend.neutral { background: #d1a23d; }
.mini-map-legend .legend.barb { background: #7f8c8d; }

.map-popup {
    position: absolute;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid var(--beige-darker);
    border-radius: var(--border-radius-medium);
    padding: var(--spacing-md);
    box-shadow: var(--box-shadow-hover);
    z-index: 1000;
    min-width: 220px;
    backdrop-filter: blur(3px);
}

.map-popup .popup-close-btn {
    position: absolute;
    top: 6px;
    right: 8px;
    background: transparent;
    border: none;
    font-size: 18px;
    cursor: pointer;
}

.note-card {
    display: flex;
    flex-direction: column;
    gap: 6px;
    margin-top: var(--spacing-sm);
}

.reserve-row {
    display: flex;
    align-items: center;
    gap: 8px;
}

.reserve-row select {
    padding: 6px 8px;
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-small);
}

.movement-stack {
    position: absolute;
    left: 4px;
    bottom: 4px;
    display: flex;
    gap: 2px;
}

.movement-icon {
    width: 14px;
    height: 14px;
    border: 1px solid transparent;
    border-radius: 4px;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.2));
}

.movement-icon.noble-move {
    border-color: #e08a3c;
    box-shadow: 0 0 4px rgba(224, 138, 60, 0.7);
    background: rgba(224, 138, 60, 0.15);
}

.note-icon {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 16px;
    height: 16px;
}

@media (max-width: 800px) {
    .map-controls {
        justify-content: flex-start;
    }

    .map-grid {
        --map-tile-size: 28px;
    }

    .map-tile .coords {
        font-size: 9px;
    }
}

/* Game header resource bar (game.php) */
#resource-bar {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-sm);
    background: rgba(255, 255, 255, 0.1);
    padding: var(--spacing-sm);
    border-radius: var(--border-radius-small);
    overflow-x: auto;
    scrollbar-gutter: stable both-edges;
}

#resource-bar::-webkit-scrollbar {
    height: 8px;
}

#resource-bar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.35);
    border-radius: 6px;
}

#resource-bar .resource-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius-small);
    box-shadow: var(--box-shadow-inset);
    color: #fff;
    font-weight: bold;
}

#resource-bar .resource-item img {
    width: 18px;
    height: 18px;
}

#resource-bar .resource-item .capacity {
    font-size: 0.9rem;
    color: #f0e6c8;
    opacity: 0.85;
}

/* Achievements */
.achievements-page {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.achievements-intro {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: #fffaf2;
    border: 1px solid #e3d6b2;
    border-radius: var(--border-radius-medium);
    box-shadow: var(--box-shadow-default);
}

.achievements-legend {
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
}

.achievements-legend .legend {
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 0.9rem;
    border: 1px solid #d4c295;
    background: #f4ede0;
}

.achievements-legend .legend.unlocked {
    border-color: #67a35b;
    color: #2e6b22;
    background: #e6f6e1;
}

.achievements-legend .legend.in-progress {
    border-color: #d4a657;
    color: #8a5c1a;
    background: #fff3dc;
}

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--spacing-md);
}

.achievement-card {
    padding: var(--spacing-md);
    border: 1px solid #e3d6b2;
    border-radius: var(--border-radius-medium);
    background: #fff;
    box-shadow: var(--box-shadow-default);
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.achievement-card.unlocked {
    border-color: #67a35b;
    background: linear-gradient(135deg, #f7fff4 0%, #ffffff 100%);
}

.achievement-card.in-progress {
    border-color: #d4a657;
}

.achievement-card__top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    color: #7b5d2f;
}

.achievement-category {
    font-weight: bold;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.achievement-status {
    padding: 4px 10px;
    border-radius: 999px;
    background: #f4ede0;
    border: 1px solid #e3d6b2;
    font-weight: 600;
}

.achievement-card.unlocked .achievement-status {
    background: #e6f6e1;
    border-color: #67a35b;
    color: #2e6b22;
}

.achievement-description {
    color: #5a4a36;
    min-height: 48px;
}

.achievement-progress {
    width: 100%;
    height: 10px;
    background: #f0e6cf;
    border-radius: 999px;
    overflow: hidden;
    box-shadow: var(--box-shadow-inset);
}

.achievement-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #b87f2c 0%, #e9b658 100%);
}

.achievement-card.unlocked .achievement-progress-bar {
    background: linear-gradient(90deg, #45a049 0%, #87c776 100%);
}

.achievement-progress-meta {
    display: flex;
    justify-content: space-between;
    color: #7b5d2f;
    font-size: 0.95rem;
}

.achievement-rewards {
    padding-top: 4px;
    color: #4b3b24;
    font-weight: 600;
}

@media (max-width: 700px) {
    .achievements-intro {
        flex-direction: column;
    }
}

/* Intel dashboard */
.card {
    background: #fff;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.05);
}
.intel-dashboard {
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.06);
}
.intel-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 16px;
}
.intel-meta {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: flex-end;
}
.eyebrow {
    letter-spacing: 0.08em;
    font-size: 0.85rem;
    text-transform: uppercase;
    color: #7a6c55;
    margin-bottom: 4px;
}
.intel-legend {
    margin-top: 12px;
}
.legend-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
}
.legend-card {
    background: #faf7f1;
    border: 1px solid #e6ddc7;
    border-radius: 10px;
    padding: 12px;
}
.legend-title {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 8px;
}
.legend-row {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 8px;
}
.intel-reports .section-head {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-top: 18px;
    margin-bottom: 8px;
}
.intel-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
}
.intel-table th,
.intel-table td {
    border-bottom: 1px solid #eee4cf;
    padding: 10px 8px;
    vertical-align: top;
}
.intel-table th {
    text-align: left;
    font-weight: 700;
    color: #4b3b24;
}
.intel-table tr:hover {
    background: #faf5ea;
}
.target-line {
    display: flex;
    align-items: baseline;
    gap: 6px;
}
.stat-line {
    display: flex;
    justify-content: space-between;
    gap: 8px;
    color: #4b3b24;
}
.stat-label {
    font-weight: 700;
    font-size: 0.85rem;
}
.action-stack {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.tag-row {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 6px;
}
.tag-pill {
    padding: 3px 6px;
    border-radius: 8px;
    color: #fff;
    font-size: 0.85rem;
    display: inline-block;
}
.pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 999px;
    font-weight: 700;
    font-size: 0.85rem;
    border: 1px solid transparent;
}
.pill-success { background: #e8f7ec; color: #1f7a3d; border-color: #b9e3c5; }
.pill-warning { background: #fff7e6; color: #8a5a00; border-color: #f2d199; }
.pill-accent  { background: #e8f0ff; color: #2f4ea3; border-color: #c4d1ff; }
.pill-info    { background: #e8f5ff; color: #0f5d8c; border-color: #c5e5ff; }
.pill-neutral { background: #f2eee7; color: #4b3b24; border-color: #ddd1bb; }
.pill-muted   { background: #f6f3ee; color: #7a6c55; border-color: #e5dbcb; }
.btn-success {
    background: #1f7a3d;
    color: #fff;
}

@media (max-width: 900px) {
    .intel-header {
        flex-direction: column;
        align-items: flex-start;
    }
    .intel-table th:nth-child(7),
    .intel-table td:nth-child(7) {
        display: none;
    }
}
